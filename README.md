# POW-Blockchain

Это простая реализация блокчейна на языке Go. Приложение включает базовый механизм доказательства выполнения работы (Proof of Work), валидацию блоков и HTTP API для взаимодействия с блокчейном.

## Возможности

- **Блокчейн**: Хранит цепочку блоков, где каждый блок содержит:
  - Индекс
  - Метку времени
  - Данные
  - Хэш
  - Хэш предыдущего блока
  - Сложность
  - Нонс
- **Proof of Work**: Генерирует блок, находя нонс, который обеспечивает хэш с определенным количеством ведущих нулей.
- **REST API**:
  - `GET /`: Получить текущую цепочку блоков.
  - `POST /`: Добавить новый блок с данными.

## Предварительные требования

Убедитесь, что установлены:

- [Go](https://go.dev/) (версия 1.16 или выше)
- Пакеты:
  - [Gorilla Mux](https://github.com/gorilla/mux) для маршрутизации
  - [Godotenv](https://github.com/joho/godotenv) для загрузки переменных окружения

Для установки зависимостей выполните:

```bash
go get github.com/gorilla/mux
go get github.com/joho/godotenv
go get github.com/davecgh/go-spew
```

## Настройка

1. Клонируйте репозиторий:
   ```bash
   git clone <адрес-репозитория>
   cd <название-репозитория>
   ```

2. Создайте файл `.env` в корне проекта:
   ```dotenv
   PORT=8080
   ```

3. Запустите приложение:
   ```bash
   go run main.go
   ```

## Использование API

### Получить блокчейн

**GET** `/`

**Пример ответа**:
```json
[
  {
    "Index": 0,
    "Timestamp": "2025-01-23T15:00:00Z",
    "Data": 0,
    "Hash": "000000...",
    "Prevhash": "",
    "Difficulty": 1,
    "Nonce": "1"
  },
  ...
]
```

### Добавить новый блок

**POST** `/`

**Тело запроса**:
```json
{
  "Data": 123
}
```

**Пример ответа**:
```json
{
  "Index": 1,
  "Timestamp": "2025-01-23T15:05:00Z",
  "Data": 123,
  "Hash": "000000...",
  "Prevhash": "000000...",
  "Difficulty": 1,
  "Nonce": "2"
}
```

## Обзор кода

- **Основная функция**: Инициализирует генезис-блок и запускает HTTP-сервер.
- **Логика блокчейна**:
    - `calculateHash`: Генерирует хэш для блока.
    - `generateBlock`: Майнит новый блок, находя валидный нонс.
    - `isBlockValid`: Проверяет целостность блока.
- **HTTP-обработчики**:
    - `handleGetBlockchain`: Возвращает текущее состояние блокчейна.
    - `handleWriteBlock`: Майнит и добавляет новый блок.

